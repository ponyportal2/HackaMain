<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>

    <link rel="stylesheet" href="assets/styles/reset.css">
    <link rel="stylesheet" href="assets/styles/aacg.css">
    <link rel="stylesheet" href="assets/styles/style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="top-panel">
      <div class="container">
        <div class="row">
          <div class="pos-6">
            <div class="menu-wrapper">
              <a class="menu" href="#">
                <div class="menu-icon"></div>
              </a>
            </div>
          </div>
  
          <div class="pos-6">
            <div class="user-panel small" style=" user-select: none;">
              <div class="close-area closed" id="user-dropdown-close-area" onclick="userpanel_close()"></div>
              
              <div class="user-panel-data" onclick="userpanel_click();" style="cursor: pointer;">
                <span class="user-avatar">
                  <img class="user-avatar img-load-assist" src="/assets/images/user.webp" alt="User">
                </span>
                <p class="user-name"></p>
              </div>

              <div class="dropdown-menu closing closed" id="user-dropdown">
                <a href="#" class="btn-link pick-image">Change profile picture</a>
                <a href="#" class="btn-link logout" onclick="trigger_logout(event)">Log out</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="files-panel albums">
      <div class="container">
        <div class="row">
          <div class="pos-12">
            <h2 class="files-header albums">Your albums</h2>
          </div>
        </div>
        <div class="row">
          <div class="pos-12">
            <div class="files albums" id="albums">
              <div class="file album">
                <div class="content"><div class="folder-icon" onclick="open_album('Summer and crossbows');"></div><span class="album-name">Summer and crossbows</span></div>
              </div>
              <div class="file album">
                <div class="content"><div class="folder-icon" onclick="open_album('Homework');"></div><span class="album-name">Homework</span></div>
              </div>
              <div class="file album">
                <div class="content"><div class="folder-icon" onclick="open_album('Photos');"></div><span class="album-name">Photos</span></div>
              </div>
              <div class="file album">
                <div class="content"><div class="folder-icon" onclick="open_album('Who let the dogs out');"></div><span class="album-name">Who let the dogs out</span></div>
              </div>

              <div class="file album">
                <div class="content"><div class="plus-icon" onclick="on_album_create();"></div><span class="album-name">New album</span></div>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </div>

    <div class="files-panel videos">
      <div class="container">
        <div class="row">
          <div class="pos-12">
            <h2 class="files-header videos">Your videos <button class="text-action" onclick="upload_media()">Upload videos...</button></h2>
          </div>
        </div>
        <div class="row">
          <div class="pos-12">
            <div class="files videos" id="videos">

              <div class="file album">
                <div class="content"><div class="plus-icon" onclick="upload_media();"></div><span class="album-name">Add video...</span></div>
              </div>

              <div class="file video">
                <video class="content" controls="controls" >
                  <source src="assets/test_video.mp4" type="video/mp4;">
                </video>
              </div>


            </div>
          </div>
          
        </div>
      </div>
    </div>

    <div class="files-panel">
      <div class="container">
        <div class="row">
          <div class="pos-12">
            <h2 class="files-header">All media <button class="text-action" onclick="upload_media()">Upload more...</button></h2>
          </div>
        </div>
        <div class="row">
          <div class="pos-12">
            <div class="files" id="files">
              <div class="file image bg-load-assist" onclick="open_image('/verdachinna/car.jpg');" style="background-image: url(/api/images/verdachinna/car.jpg);"><div class="content"><p class="filename">verdachinna/car.jpg</p></div></div>
            </div>
          </div>
          
        </div>
      </div>
    </div>

    
    <div class="zoom-popup popup closed" id="zoom-popup">
      <div class="zoom-image-wrapper">
        <image class="zoom-image" id="zoom-popup-image" src="assets/images/user.webp"></image>
      </div>
      <div class="drag-area" id="zoom-popup-drag">
        <button class="popup-close" onclick="close_image_zoom()">Close image</button>
      </div>
    </div>

    <div class="upload-popup popup closed" id="upload-popup">
      <div class="drop-area" id="drop-area" ondrop="dropHandler(event);" ondragover="dragOverHandler(event);">
        <p class="greet_info">Drag&drop one or more files to this <i>drop zone</i></p>

        <div class="files-form-wrap">
          <div class="container ">
            <div class="row">
              <div class="pos-12">
                <form class="files-form" id="files-form" onsubmit="send_files(event)">

                  <h2 style="margin-bottom: 2rem;">Your files:</h2>
                  <input type="file" class="file_input" id="files_input" multiple accept="image/*" onchange="handleFiles(this.files)">
                  <label for="files_input" class="l-button">Pick files...</label>

                  <input type="submit" value="Upload...">

                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <img src="assets/images/user.webp" alt="" id="buffer-img">

    <script src="assets/scripts/get_auth_token.js"></script>
    <script src="assets/scripts/api.js"></script>

    <script type="module">
      verify_token(get_auth_token())
      .then(is_valid => {
          console.log("Token: ", get_auth_token());
          console.log("Is valid: ", is_valid);
          if (!is_valid)
              location.assign(`${PREFIX}/login.html`);
      })
    </script>

    <script src="assets/scripts/logout.js"></script>

    <script src="assets/scripts/script.js"></script>
    <script src="assets/scripts/drag.js"></script>
    <script src="assets/scripts/folder.js"></script>
    <script src="assets/scripts/dragdrop.js"></script>
    <script src="assets/scripts/main_server_interaction.js"></script>
  </body>
</html>